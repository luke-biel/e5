[package]
name = "taplo"
description = "TOML toolkit with LSP, formatter, and validator"
homepage = "https://taplo.tamasfe.dev/"
verify_binary = "taplo"

[install.homebrew]
pkg_name = "taplo"
tap = "tamasfe/taplo"

[install.pacman]
pkg_name = "taplo-cli"

[install.script]
script = """
set -e
VERSION="${VERSION:-0.10.0}"
ARCH=$(uname -m)
OS=$(uname -s | tr '[:upper:]' '[:lower:]')

case "$ARCH" in
    x86_64) TAPLO_ARCH="x86_64" ;;
    aarch64|arm64) TAPLO_ARCH="aarch64" ;;
    *) echo "Unsupported architecture: $ARCH"; exit 1 ;;
esac

case "$OS" in
    linux) TAPLO_OS="linux" ;;
    darwin) TAPLO_OS="darwin" ;;
    *) echo "Unsupported OS: $OS"; exit 1 ;;
esac

TARBALL="taplo-full-${TAPLO_OS}-${TAPLO_ARCH}.gz"
curl -LO "https://github.com/tamasfe/taplo/releases/download/${VERSION}/${TARBALL}"
gunzip -f "${TARBALL}"
chmod +x "taplo-full-${TAPLO_OS}-${TAPLO_ARCH}"
mkdir -p "$HOME/.local/bin"
mv "taplo-full-${TAPLO_OS}-${TAPLO_ARCH}" "$HOME/.local/bin/taplo"
"""
